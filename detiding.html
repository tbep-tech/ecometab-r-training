<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>detiding.utf8</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/spacelab.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-sm-12 col-md-4 col-lg-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-sm-12 col-md-8 col-lg-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">NERRS Ecosystem Metabolism R Training</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="rbasics.html">R Basics</a>
</li>
<li>
  <a href="detiding.html">Detiding</a>
</li>
<li>
  <a href="odum.html">The Odum method</a>
</li>
<li>
  <a href="using.html">Using metabolism</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="Data_and_Resources.html">
    <span class="fas fa-list"></span>
     
    Data and resources
  </a>
</li>
<li>
  <a href="https://github.com/tbep-tech/ecometab-r-training">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">




</div>


<div id="detiding" class="section level1">
<h1>Detiding</h1>
<p>Get the lesson R script: <a href="detiding.R">rbasics.R</a></p>
<p>Get the lesson data: <a href="data/779980.zip">download zip</a></p>
<div id="lesson-outline" class="section level2">
<h2>Lesson Outline</h2>
<ul>
<li><a href="#goals-and-motivation">Goals and Motivation</a></li>
<li>[RStudio]</li>
<li>[R language fundamentals]</li>
<li>[Data structures in R]</li>
<li>[Getting your data into R]</li>
</ul>
</div>
<div id="lesson-exercises" class="section level2">
<h2>Lesson Exercises</h2>
<ul>
<li><a href="#exercise-1">Exercise 1</a></li>
<li>[Exercise 2]</li>
<li>[Exercise 3]</li>
</ul>
</div>
<div id="goals-and-motivation" class="section level2">
<h2>Goals and Motivation</h2>
<p>This lesson will teach you how to use the <a href="https://cran.r-project.org/web/packages/SWMPr/index.html">SWMPr</a> package to import SWMP data and how to use the <a href="https://github.com/fawda123/wtregdo">WtRegDO</a> package to detide a dissolved oxygen time series. We’ll also be using packages in the tidyverse to wrangle the data for use with the WtRegDO functions. Background information on SWMPr is <a href="https://journal.r-project.org/archive/2016/RJ-2016-015/index.html">here</a> and background information on detiding is <a href="https://aslopubs.onlinelibrary.wiley.com/doi/full/10.1002/lom3.10062">here</a>.</p>
<p>By the end of this lesson, you should know how or find the resources to be able to do the following:</p>
<ul>
<li>Load SWMPr and import data from Apalachicola and Sapelo Island using the <code>import_local</code> function</li>
<li>Clean the SWMP data with <code>qaqc</code> and combine datasets with <code>comb</code></li>
<li>Use the dplyr package to prepare the data for WtRegDO</li>
<li>Understand if dissolved oxygen is correlated with tide and how WtRegDO “removes” the tidal signal</li>
<li>Use WtRegDO to detide the DO time series</li>
</ul>
</div>
<div id="data-import-with-swmpr" class="section level2">
<h2>Data import with SWMPr</h2>
<p>Last time we got comfortable with R basics by exploring how to get around the RStudio console, understanding the basics of the R language, and importing datasets for analysis. Now that we have the basics out of the way, we can use some existing packages to work specifically with SWMP data.</p>
<p>The SWMPr package was developed a few years ago to provide a bridge between the raw data and the R analysis platform. It does this with some degree of success, but by far it’s most useful feature is being able to import and combine time series from SWMP sites with relative ease. In particular, the <code>import_local</code>, <code>qaqc</code>, and <code>comb</code> functions allow us to quickly import, clean up, and combine datasets for follow-up analysis. This all we’ll do with SWMPr in these lessons.</p>
<p>The <code>import_local</code> function is designed to work with data downloaded from the CDMO using the “Zip Downloads” feature from the Advanced Query System: <a href="http://cdmo.baruch.sc.edu/aqs/zips.cfm" class="uri">http://cdmo.baruch.sc.edu/aqs/zips.cfm</a>. The data we have in our “data” folder was a requested from this feature for all datasets from Apalachicola and Sapelo Island from 2017 to 2019.</p>
<p>The <code>import_local</code> function has two arguments: <code>path</code> to indicate where the data are located and <code>station_code</code> to indicate which station to import. We first load SWMPr and then use the function to import data for Apallachicola Dry Bar station:</p>
<pre class="r"><code># load SWMPr
library(SWMPr)

# import data
apadbwq &lt;- import_local(path = &#39;data&#39;, station_code = &#39;apadbwq&#39;)

# characteristics of the dataset
head(apadbwq)</code></pre>
<pre><code>##         datetimestamp temp f_temp spcond f_spcond  sal f_sal do_pct f_do_pct
## 1 2017-01-01 00:00:00 15.9    &lt;0&gt;  34.99      &lt;0&gt; 22.1   &lt;0&gt;  104.1      &lt;0&gt;
## 2 2017-01-01 00:15:00 15.9    &lt;0&gt;  34.94      &lt;0&gt; 22.0   &lt;0&gt;  104.0      &lt;0&gt;
## 3 2017-01-01 00:30:00 15.9    &lt;0&gt;  34.90      &lt;0&gt; 22.0   &lt;0&gt;  103.5      &lt;0&gt;
## 4 2017-01-01 00:45:00 15.9    &lt;0&gt;  34.94      &lt;0&gt; 22.0   &lt;0&gt;  103.3      &lt;0&gt;
## 5 2017-01-01 01:00:00 15.9    &lt;0&gt;  34.99      &lt;0&gt; 22.1   &lt;0&gt;  104.1      &lt;0&gt;
## 6 2017-01-01 01:15:00 15.9    &lt;0&gt;  35.08      &lt;0&gt; 22.1   &lt;0&gt;  103.9      &lt;0&gt;
##   do_mgl f_do_mgl depth f_depth cdepth f_cdepth level f_level clevel f_clevel
## 1    9.0      &lt;0&gt;  1.88     &lt;0&gt;   1.81      &lt;3&gt;    NA    &lt;-1&gt;     NA     &lt;NA&gt;
## 2    9.0      &lt;0&gt;  1.88     &lt;0&gt;   1.81      &lt;3&gt;    NA    &lt;-1&gt;     NA     &lt;NA&gt;
## 3    9.0      &lt;0&gt;  1.89     &lt;0&gt;   1.82      &lt;3&gt;    NA    &lt;-1&gt;     NA     &lt;NA&gt;
## 4    8.9      &lt;0&gt;  1.89     &lt;0&gt;   1.83      &lt;3&gt;    NA    &lt;-1&gt;     NA     &lt;NA&gt;
## 5    9.0      &lt;0&gt;  1.90     &lt;0&gt;   1.84      &lt;3&gt;    NA    &lt;-1&gt;     NA     &lt;NA&gt;
## 6    9.0      &lt;0&gt;  1.90     &lt;0&gt;   1.84      &lt;3&gt;    NA    &lt;-1&gt;     NA     &lt;NA&gt;
##    ph f_ph turb f_turb chlfluor f_chlfluor
## 1 8.3  &lt;0&gt;   15    &lt;0&gt;       NA       &lt;-1&gt;
## 2 8.2  &lt;0&gt;   15    &lt;0&gt;       NA       &lt;-1&gt;
## 3 8.3  &lt;0&gt;   13    &lt;0&gt;       NA       &lt;-1&gt;
## 4 8.3  &lt;0&gt;   16    &lt;0&gt;       NA       &lt;-1&gt;
## 5 8.3  &lt;0&gt;   10    &lt;0&gt;       NA       &lt;-1&gt;
## 6 8.3  &lt;0&gt;   14    &lt;0&gt;       NA       &lt;-1&gt;</code></pre>
<pre class="r"><code>dim(apadbwq)</code></pre>
<pre><code>## [1] 105120     25</code></pre>
<pre class="r"><code>range(apadbwq$datetimestamp)</code></pre>
<pre><code>## [1] &quot;2017-01-01 00:00:00 EST&quot; &quot;2019-12-31 23:45:00 EST&quot;</code></pre>
<p>Note that this function was able to import and combine data from multiple csv files. We would have had to do this by hand if we were importing data with more general import functions available in R (e.g., <code>read_csv()</code> from last time).</p>
</div>
<div id="cleaning-and-combining-swmp-data" class="section level2">
<h2>Cleaning and combining SWMP data</h2>
<p>Each row has data for multiple parameters at 15 minute intervals. Each parameter also includes a column with QAQC flags, i.e., <code>f_</code> then the parameter name. We can then use the <code>qaqc</code> function to “screen” observations with specific QAQC flags. You can view what the flags mean at this website: <a href="http://cdmo.baruch.sc.edu/data/qaqc.cfm" class="uri">http://cdmo.baruch.sc.edu/data/qaqc.cfm</a>. We typically want to only use data that have the “0” flag, meaning it has passed initial QAQC checks. Other flags can be kept by adding them to the <code>qaqc_keep</code> argument. You can view a tabular summary of the flags in a dataset using the <code>qaqcchk</code> function.</p>
<pre class="r"><code># keep only observations that passed qaqc chekcs
apadbwq &lt;- qaqc(apadbwq, qaqc_keep = &#39;0&#39;)

# check the results
head(apadbwq)</code></pre>
<pre><code>##         datetimestamp temp spcond  sal do_pct do_mgl depth cdepth level clevel
## 1 2017-01-01 00:00:00 15.9  34.99 22.1  104.1    9.0  1.88     NA    NA     NA
## 2 2017-01-01 00:15:00 15.9  34.94 22.0  104.0    9.0  1.88     NA    NA     NA
## 3 2017-01-01 00:30:00 15.9  34.90 22.0  103.5    9.0  1.89     NA    NA     NA
## 4 2017-01-01 00:45:00 15.9  34.94 22.0  103.3    8.9  1.89     NA    NA     NA
## 5 2017-01-01 01:00:00 15.9  34.99 22.1  104.1    9.0  1.90     NA    NA     NA
## 6 2017-01-01 01:15:00 15.9  35.08 22.1  103.9    9.0  1.90     NA    NA     NA
##    ph turb chlfluor
## 1 8.3   15       NA
## 2 8.2   15       NA
## 3 8.3   13       NA
## 4 8.3   16       NA
## 5 8.3   10       NA
## 6 8.3   14       NA</code></pre>
<pre class="r"><code>dim(apadbwq)</code></pre>
<pre><code>## [1] 105120     13</code></pre>
<pre class="r"><code>range(apadbwq$datetimestamp)</code></pre>
<pre><code>## [1] &quot;2017-01-01 00:00:00 EST&quot; &quot;2019-12-31 23:45:00 EST&quot;</code></pre>
<p>Notice that the number of rows are the same as before - no rows are removed by <code>qaqc</code> to retain the timesteps. Values that did not fit the screening criteria are given a <code>NA</code> value. Also notice the flag columns are removed.</p>
<p>Now we can repeat the steps above to import and clean data from the weather station at Apalachicola.</p>
<pre class="r"><code># import weather data, clean it up
apaebmet &lt;- import_local(path = &#39;data&#39;, station_code = &#39;apaebmet&#39;)
apaebmet &lt;- qaqc(apaebmet, qaqc_keep = &#39;0&#39;)

# check the results
head(apaebmet)</code></pre>
<pre><code>##         datetimestamp atemp rh   bp wspd maxwspd wdir sdwdir totpar totprcp
## 1 2017-01-01 00:00:00  15.7 89 1020  4.8     6.7   97     10      0       0
## 2 2017-01-01 00:15:00  15.8 90 1020  4.9     6.5  103      9      0       0
## 3 2017-01-01 00:30:00  16.1 91 1020  3.8     5.8  107     11      0       0
## 4 2017-01-01 00:45:00  16.5 92 1019  3.3     6.4  119     15      0       0
## 5 2017-01-01 01:00:00  16.9 93 1019  5.3     8.6  113      9      0       0
## 6 2017-01-01 01:15:00  17.3 93 1019  3.9     5.6  118     10      0       0
##   totsorad
## 1       NA
## 2       NA
## 3       NA
## 4       NA
## 5       NA
## 6       NA</code></pre>
<pre class="r"><code>dim(apaebmet)</code></pre>
<pre><code>## [1] 105120     11</code></pre>
<pre class="r"><code>range(apaebmet$datetimestamp)</code></pre>
<pre><code>## [1] &quot;2017-01-01 00:00:00 EST&quot; &quot;2019-12-31 23:45:00 EST&quot;</code></pre>
<p>The <code>comb</code> function in SWMPr lets us combine data from two locations using the <code>datetimestamp</code> column. We’ll need to do this to use the functions in the WtRegDO package that require both water quality and weather data.</p>
<p>There are a couple of arguments to consider when using the <code>comb</code> function. First, the <code>timestep</code> argument defines the time step for the resulting output. Keep this at 15 to retain all of the data. You could use a larger time step to subset the data if, for example, we data only every 60 minutes. Second, the <code>method</code> argument defines how two datasets with different date ranges are combined. Use <code>method = 'union'</code> to retain the entire date range across both datasets or use <code>method = 'intersect'</code> to retain only the dates that include data from both datasets. For our example, <code>union</code> and <code>intersect</code> produce the same results since the date ranges are the same.</p>
<pre class="r"><code># combine water quality and weather data
apa &lt;- comb(apadbwq, apaebmet, timestep = 15, method = &#39;union&#39;)

# check the results
head(apa)</code></pre>
<pre><code>##         datetimestamp temp spcond  sal do_pct do_mgl depth cdepth level clevel
## 1 2017-01-01 00:00:00 15.9  34.99 22.1  104.1    9.0  1.88     NA    NA     NA
## 2 2017-01-01 00:15:00 15.9  34.94 22.0  104.0    9.0  1.88     NA    NA     NA
## 3 2017-01-01 00:30:00 15.9  34.90 22.0  103.5    9.0  1.89     NA    NA     NA
## 4 2017-01-01 00:45:00 15.9  34.94 22.0  103.3    8.9  1.89     NA    NA     NA
## 5 2017-01-01 01:00:00 15.9  34.99 22.1  104.1    9.0  1.90     NA    NA     NA
## 6 2017-01-01 01:15:00 15.9  35.08 22.1  103.9    9.0  1.90     NA    NA     NA
##    ph turb chlfluor atemp rh   bp wspd maxwspd wdir sdwdir totpar totprcp
## 1 8.3   15       NA  15.7 89 1020  4.8     6.7   97     10      0       0
## 2 8.2   15       NA  15.8 90 1020  4.9     6.5  103      9      0       0
## 3 8.3   13       NA  16.1 91 1020  3.8     5.8  107     11      0       0
## 4 8.3   16       NA  16.5 92 1019  3.3     6.4  119     15      0       0
## 5 8.3   10       NA  16.9 93 1019  5.3     8.6  113      9      0       0
## 6 8.3   14       NA  17.3 93 1019  3.9     5.6  118     10      0       0
##   totsorad
## 1       NA
## 2       NA
## 3       NA
## 4       NA
## 5       NA
## 6       NA</code></pre>
<pre class="r"><code>dim(apa)</code></pre>
<pre><code>## [1] 105120     23</code></pre>
<pre class="r"><code>range(apa$datetimestamp)</code></pre>
<pre><code>## [1] &quot;2017-01-01 00:00:00 EST&quot; &quot;2019-12-31 23:45:00 EST&quot;</code></pre>
</div>
<div id="exercise-1" class="section level2">
<h2>Exercise 1</h2>
<p>Repeat the above exercises but do this using data for Sapelo Island. Import data for <code>sapdcwq</code> and <code>sapmlmet</code>, clean them up with <code>qaqc</code>, and combine them with <code>comb</code>.</p>
<ol style="list-style-type: decimal">
<li>Open a new script in your RStudio project, save it with an informative title (e.g, <code>import-detiding.R</code>), and add a section header with <code>Ctrl + Shift + R</code>. 1. Load the SWMPr package with the <code>library</code> function.</li>
<li>Import and clean up <code>sapdcwq</code> with <code>import_local</code> and <code>qaqc</code>.</li>
<li>Import and clean up <code>sapmlmet</code> with <code>import_local</code> and <code>qaqc</code>.</li>
<li>Combine the two with <code>comb</code>. Keep the time step at 15 minutes and use the <code>union</code> option.</li>
</ol>
</div>
<div id="preparing-swmp-data-for-detiding" class="section level2">
<h2>Preparing SWMP data for detiding</h2>
</div>
<div id="what-is-and-why-detiding" class="section level2">
<h2>What is and why detiding</h2>
</div>
<div id="using-wtregdo-to-detide" class="section level2">
<h2>Using WtRegDO to detide</h2>
</div>
<div id="how-well-did-it-work" class="section level2">
<h2>How well did it work?</h2>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
